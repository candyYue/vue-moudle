(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Bjn0:function(e,t,n){},Fl9d:function(e,t,n){"use strict";var i=n("Bjn0");n.n(i).a},VMqF:function(e,t,n){"use strict";n.r(t);n("f3/d"),n("INYr");var i,a=n("iv4g"),s=(n("ls82"),n("MECJ")),c=n("yT7P"),o=n("L2JU"),l={data:function(){return{shareModal:!1,loading:!1,checkAll:!1,checkedCompanies:[],companies:[],isIndeterminate:!1,script_id:null,repeatScriptComId:[]}},computed:Object(c.a)({},Object(o.c)({CompanyScriptTotal:"Admin/CompanyScriptTotal",CompanyScriptList:"Admin/CompanyScriptList",AllEsTotalList:"Admin/AllEsTotalList"})),methods:Object(c.a)({},Object(o.b)({getCompanyScripts:"Admin/getCompanyScripts",getAllEs:"Admin/getAllEs",copyScripts:"Admin/copyScripts"}),{shareAction:(i=Object(s.a)(regeneratorRuntime.mark(function e(t){var n,i,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.AllEsTotalList,e.t0){e.next=5;break}return e.next=4,this.getAllEs();case 4:e.t0=e.sent;case 5:n=e.t0,this.companies=Object(a.a)(n),(i=this.companies.findIndex(function(e){return e.id===+s.$route.query.es_id}))>=0&&this.companies.splice(i,1),this.script_id=t,this.shareModal=!0,this.checkedCompanies=[],this.checkAll=!1,this.isIndeterminate=!1;case 14:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),closeModal:function(){var e=this;this.loading=!1,this.shareModal=!1,setTimeout(function(){e.companies=[]},500)},handleSave:function(){var e=this;if(0===this.checkedCompanies.length)return this.$messageTip.$warning({content:"请选择企业"}),!1;this.loading=!0,this.copyScripts({src_es_id:this.$route.query.es_id,script_id:this.script_id,des_es_id:this.checkedCompanies}).then(function(t){0===t.status?(e.$messageTip.$success({content:"话术分享成功"}),e.shareModal=!1,e.loading=!1):(e.$messageTip.$error({content:t.info}),e.loading=!1)})},checkAllChange:function(e){this.checkedCompanies=e?this.companies.map(function(e){return e.id}):[],this.isIndeterminate=!1},checkedCompaniesChange:function(e){this.checkedCompanies=e;var t=e.length;this.checkAll=t===this.companies.length,this.isIndeterminate=t>0&&t<this.companies.length}}),beforeRouteLeave:function(e,t,n){"admin"===e.name&&this.$router.push({name:"login"}),n()}},r=(n("Fl9d"),n("KHd+")),h=Object(r.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"company"},[n("table-pagination",{attrs:{name:"话术",router:"AICall-talk-script",pageKey:"script",total:e.CompanyScriptTotal,newToolBar:!1},on:{getList:e.getCompanyScripts}},[n("el-table",{attrs:{data:e.CompanyScriptList}},[n("el-table-column",{attrs:{prop:"name",label:"话术名称",align:"left",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("i"),e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTime")(t.row.create_time))+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100","class-name":"visible-cell"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-share"},on:{click:function(n){e.shareAction(t.row.id)}}},[e._v("分享")])]}}])})],1)],1),n("Modal",{attrs:{title:"选择企业",comfirmText:"确定",draggable:"",loading:e.loading,showLine:!0},on:{cancel:e.closeModal,comfirm:e.handleSave},model:{value:e.shareModal,callback:function(t){e.shareModal=t},expression:"shareModal"}},[n("div",{staticClass:"chooseCompany"},[n("el-checkbox-group",{on:{change:e.checkedCompaniesChange},model:{value:e.checkedCompanies,callback:function(t){e.checkedCompanies=t},expression:"checkedCompanies"}},e._l(e.companies,function(t){return n("el-checkbox",{key:t.id,attrs:{label:t.id,title:t.name}},[e._v(e._s(t.name))])}))],1),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.checkAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全部企业")])],1)],1)},[],!1,null,null,null);t.default=h.exports}}]);